emulate -L zsh
autoload -Uz zle-eval
local last_word="${LBUFFER##* }"
local dir=.
if [[ -n $last_word ]]; then
    local dirname=$(dirname $last_word)
    if [[ -d $last_word ]]; then
        dir=$last_word
    elif [[ -d $dirname ]]; then
        dir=$dirname
    fi
fi
zle-eval l $dir
